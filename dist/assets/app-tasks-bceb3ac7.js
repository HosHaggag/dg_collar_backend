import{t as P,q as N,s as f,_ as g,r as T,y as R,z as A,T as x,j as s,A as I,C as M,l as i,a9 as b,P as d,S as E,I as _,i as v,aa as $,Y as O}from"./index-6f2efa30.js";import{C as U}from"./Card-763c1883.js";import{F as k,C as z}from"./FormControlLabel-9eb9a122.js";function B(t){return N("MuiCardHeader",t)}const F=P("MuiCardHeader",["root","avatar","action","content","title","subheader"]),j=F,J=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],q=t=>{const{classes:e}=t;return M({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},B,e)},G=f("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>g({[`& .${j.title}`]:e.title,[`& .${j.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),W=f("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Y=f("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),K=f("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),Q=T.forwardRef(function(e,r){const a=R({props:e,name:"MuiCardHeader"}),{action:n,avatar:o,className:l,component:p="div",disableTypography:h=!1,subheader:m,subheaderTypographyProps:D,title:H,titleTypographyProps:w}=a,L=A(a,J),u=g({},a,{component:p,disableTypography:h}),c=q(u);let C=H;C!=null&&C.type!==x&&!h&&(C=s.jsx(x,g({variant:o?"body2":"h5",className:c.title,component:"span",display:"block"},w,{children:C})));let y=m;return y!=null&&y.type!==x&&!h&&(y=s.jsx(x,g({variant:o?"body2":"body1",className:c.subheader,color:"text.secondary",component:"span",display:"block"},D,{children:y}))),s.jsxs(G,g({className:I(c.root,l),as:p,ref:r,ownerState:u},L,{children:[o&&s.jsx(W,{className:c.avatar,ownerState:u,children:o}),s.jsxs(K,{className:c.content,ownerState:u,children:[C,y]}),n&&s.jsx(Y,{className:c.action,ownerState:u,children:n})]}))}),V=Q,ae=async t=>{try{const{user:e}=i.getState();console.log({user:e,task:t}),i.setState({user:{...e,toDoList:[...(e==null?void 0:e.toDoList)??[],{task:t,isCompleted:!1}]}});const r=await fetch(`${b}/todo/add`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task:t,userId:e._id})}),{toDoList:a,message:n}=await r.json();i.setState({user:{...e,toDoList:a}});return}catch(e){console.log(" err adding task ==>",{error:e})}},X=async t=>{try{const{user:e}=i.getState();console.log({user:e,taskId:t}),i.setState({user:{...e,toDoList:((e==null?void 0:e.toDoList)??[]).filter(o=>o._id!==t)}});const r=await fetch(`${b}/todo`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({taskId:t,userId:e._id})}),{toDoList:a,message:n}=await r.json();i.setState({user:{...e,toDoList:a}});return}catch(e){console.log(" err deleting task ==>",{error:e})}},Z=async t=>{try{const{user:e,token:r}=i.getState();i.setState({user:{...e,toDoList:((e==null?void 0:e.toDoList)??[]).map(l=>l._id===t.id?{...l,isCompleted:!l.isCompleted}:l)}});const a=await fetch(`${b}/todo`,{method:"PATCH",headers:{"Content-Type":"application/json",authorization:`Bearer ${r}`},body:JSON.stringify({taskId:t.id,task:t.task,isCompleted:t.isCompleted})}),{toDoList:n,message:o}=await a.json();i.setState({user:{...e,toDoList:n}});return}catch(e){console.log(" err toggling task ==>",{error:e})}};function ee({title:t,subheader:e,list:r,...a}){const n=async o=>{await Z(o)};return s.jsxs(U,{...a,children:[s.jsx(V,{title:t,subheader:e}),r.map(o=>s.jsx(S,{id:o.id,isCompleted:o.isCompleted,task:o,checked:o.isCompleted,onChange:()=>n({task:o.name,id:o.id,isCompleted:!o.isCompleted})},o.id))]})}ee.propTypes={list:d.array,subheader:d.string,title:d.string};function S({task:t,checked:e,onChange:r,id:a}){const[n,o]=T.useState(null),l=m=>{o(m.currentTarget)},p=()=>{o(null)},h=async()=>{p(),await X(a),console.info("DELETE",t.id)};return s.jsxs(s.Fragment,{children:[s.jsxs(E,{direction:"row",alignItems:"center",sx:{pl:2,pr:1,py:1,"&:not(:last-of-type)":{borderBottom:m=>`dashed 1px ${m.palette.divider}`},...e&&{color:"text.disabled",textDecoration:"line-through"}},children:[s.jsx(k,{control:s.jsx(z,{checked:e,onChange:r}),label:t.name,sx:{flexGrow:1,m:0}}),s.jsx(_,{color:n?"inherit":"default",onClick:l,children:s.jsx(v,{icon:"eva:more-vertical-fill"})})]}),s.jsx($,{open:!!n,anchorEl:n,onClose:p,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},children:s.jsxs(O,{onClick:h,sx:{color:"error.main"},children:[s.jsx(v,{icon:"solar:trash-bin-trash-bold",sx:{mr:2}}),"Delete"]})})]})}S.propTypes={checked:d.bool,onChange:d.func,task:d.object,id:d.string};export{ee as A,V as C,ae as a};
